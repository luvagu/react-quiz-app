(this["webpackJsonpreact-quiz-app"]=this["webpackJsonpreact-quiz-app"]||[]).push([[0],{36:function(e,t){},44:function(e,t,r){},65:function(e,t){},66:function(e,t){},69:function(e,t){},77:function(e,t){},78:function(e,t){},79:function(e,t){},82:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),a=r(38),s=r.n(a),i=(r(44),r(39)),o=r(3),u=r.n(o),l=r(24),j=r(8),d=r(17),b=r(7),O=r(2),f=r(13),h=r.n(f),m=r(0);var p=function(e){var t=e.categories,r=e.handleSubmit,n=e.handleChange,c=e.setWithTimer,a=e.loadingCategories,s=e.loadingQuestions,i=e.quizInProgress,o=e.defaultNumOfQuestions;return Object(m.jsx)("header",{children:Object(m.jsxs)("form",{onSubmit:r,children:[Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"category",children:"Category"}),a?Object(m.jsx)("span",{children:"Loading categories..."}):Object(m.jsx)("select",{id:"category",defaultValue:"9",onChange:n,disabled:a||i,children:t.map((function(e){return Object(m.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"difficulty",children:"Difficulty"}),Object(m.jsxs)("select",{id:"difficulty",defaultValue:"",onChange:n,disabled:a||i,children:[Object(m.jsx)("option",{value:"",children:"Any Difficulty"}),Object(m.jsx)("option",{value:"easy",children:"Easy"}),Object(m.jsx)("option",{value:"medium",children:"Medium"}),Object(m.jsx)("option",{value:"hard",children:"Hard"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"type",children:"Type"}),Object(m.jsxs)("select",{id:"type",defaultValue:"",onChange:n,disabled:a||i,children:[Object(m.jsx)("option",{value:"",children:"Any Type"}),Object(m.jsx)("option",{value:"multiple",children:"Multiple Choice"}),Object(m.jsx)("option",{value:"boolean",children:"True / False"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"timer",children:"Timer"}),Object(m.jsxs)("select",{id:"timer",defaultValue:"",onChange:function(e){return c(0!==parseInt(e.target.value)&&parseInt(e.target.value))},disabled:a||i,children:[Object(m.jsx)("option",{value:"0",children:"No"}),Object(m.jsx)("option",{value:"5",children:"5s"}),Object(m.jsx)("option",{value:"10",children:"10s"}),Object(m.jsx)("option",{value:"15",children:"15s"})]})]}),Object(m.jsxs)("div",{className:"form-group",children:[Object(m.jsx)("label",{htmlFor:"amount",children:"Questions"}),Object(m.jsx)("input",{type:"number",id:"amount",min:"5",max:"50",step:"5",defaultValue:o,onChange:n,disabled:a||i})]}),Object(m.jsx)("div",{className:"form-group",children:Object(m.jsx)("button",{className:"btn",type:"submit",disabled:a||i,children:s?"Loading...":i?"Quiz in progress":"Generate New Quiz"})})]})})};var x=function(e){var t=e.questionNum,r=e.totalQuestions,c=e.percentage,a=Object(n.useRef)();return Object(n.useEffect)((function(){a.current.style.setProperty("--progress",c)}),[c]),Object(m.jsxs)("div",{className:"progress-conatiner",children:[Object(m.jsxs)("div",{className:"progress-text",children:["Question ",t," of ",r]}),Object(m.jsx)("div",{ref:a,className:"progress-bar"})]})};var v=function(e){var t=e.score,r=e.timer,n=e.withTimer;return Object(m.jsxs)("div",{className:"score-timer-container",children:[n&&Object(m.jsxs)("div",{className:"score-timer-border",children:[Object(m.jsx)("div",{className:"score-timer-text",children:"Timer"}),Object(m.jsx)("div",{className:"score-timer-number",children:r})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:"score-timer-text",children:"Score"}),Object(m.jsx)("div",{className:"score-timer-number",children:t})]})]})};var g=function(e){var t=e.question,r=e.handleAnswers,c=e.setTimer,a=e.withTimer,s=e.lastQuestion,i=e.gameEnded,o=Object(n.useState)(!1),u=Object(O.a)(o,2),l=u[0],j=u[1],d=Object(n.useState)(""),b=Object(O.a)(d,2),f=b[0],h=b[1],p=Object(n.useRef)();return p.current=function(){h(t.answer),j(!0),r(null)},Object(n.useEffect)((function(){h(""),j(!1)}),[t]),Object(n.useEffect)((function(){if(a){var e=a,t=setInterval((function(){return c(e),e--,l?(c(0),clearInterval(t)):e<0&&!l?(c(0),p.current(),clearInterval(t)):void 0}),1e3);return function(){return clearInterval(t)}}}),[a,t,c,l]),Object(m.jsxs)("article",{className:"question",children:[Object(m.jsx)("h2",{children:t.question}),Object(m.jsx)("ul",{children:t.options.map((function(e,n){return l?Object(m.jsx)("li",{className:"answered\n\t\t\t\t\t\t\t\t".concat(e===f?f===t.answer?"isRight":"isWrong":f!==t.answer&&e===t.answer?"isRight":""," \n\t\t\t\t\t\t\t"),children:e},e):Object(m.jsx)("li",{onClick:function(){return function(e){h(e),j(!0),r({id:t.id,isCorrectAnswer:t.answer===e})}(e)},children:e},e)}))}),l&&!s&&Object(m.jsxs)("p",{children:["Getting next question... ",Object(m.jsx)("span",{className:"loader",children:"\u23f3"})]}),l&&s&&Object(m.jsx)("p",{children:"Quiz has ended! \ud83c\udfc1"}),l&&s&&!i&&Object(m.jsxs)("p",{children:["Computing final score... ",Object(m.jsx)("span",{className:"loader",children:"\u23f3"})]})]})},y=r(6),w=new y.Client({secret:"fnAEOCHDjSACRF5LsqMFIWJItn4ACmZGEHXYGQdp"}),N=y.query.Collection,S=y.query.Create,q=y.query.Index,E=y.query.Map,C=y.query.Get,T=y.query.Lambda,k=y.query.Match,I=y.query.Paginate,Q=y.query.Var,A=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.query(S(N("playerScores"),{data:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(u.a.mark((function e(){var t,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.query(E(I(k(q("allPlayerScores"))),T("ref",C(Q("ref")))));case 2:return t=e.sent,r=t.data,e.abrupt("return",r.map((function(e){return Object(b.a)(Object(b.a)({},e.data),{},{id:e.ref.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(e){var t=e.reduce((function(e,t){var r=t.name.toLowerCase();return e[r]=r in e?Object(b.a)(Object(b.a)({},e[r]),{},{score:e[r].score+t.score}):t,e}),{});return Object.values(t).sort((function(e,t){return t.score-e.score}))},L=function(e){var t=e.reduce((function(e,t){var r=t.category;return r in e?e[r].push(t):e[r]=[t],e}),{}),r=[];for(var n in t){var c=G(t[n]);r.push({category:n,scores:c})}return r.sort((function(e,t){return e.category>t.category}))};var M=function(e){var t=e.setError,r=Object(n.useState)(!1),c=Object(O.a)(r,2),a=c[0],s=c[1],i=Object(n.useState)(null),o=Object(O.a)(i,2),l=o[0],d=o[1],b=Object(n.useState)(""),f=Object(O.a)(b,2),h=f[0],p=f[1];return Object(n.useEffect)((function(){Object(j.a)(u.a.mark((function e(){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.prev=1,e.next=4,F();case 4:if((r=e.sent).length){e.next=7;break}return e.abrupt("return",s(!1));case 7:p(G(r)[0]),d(L(r)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0),t("\ud83d\ude41 Error loading leaderboard.");case 15:s(!1);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})))()}),[t]),Object(m.jsxs)("div",{className:"leaderboard",children:[Object(m.jsx)("h1",{children:"Leaderboard \ud83c\udfc6"}),h&&Object(m.jsxs)("div",{className:"leaderboard-group gold",children:[Object(m.jsx)("h3",{children:"Overall Top Scorer"}),Object(m.jsxs)("span",{children:["\ud83e\udd47 ",h.name," - ",h.score]})]}),l&&l.map((function(e){var t=e.category,r=e.scores;return Object(m.jsxs)("div",{className:"leaderboard-group",children:[Object(m.jsx)("h3",{children:t}),Object(m.jsx)("ul",{children:r.map((function(e,t){return Object(m.jsxs)("li",{children:[0===t&&"\ud83e\udd47 ",1===t&&"\ud83e\udd48 ",2===t&&"\ud83e\udd49 ",e.name," - ",e.score]},e.id)}))})]},t)})),a&&Object(m.jsx)("h3",{children:"Loading leaderboard..."}),!l&&!a&&Object(m.jsx)("h3",{children:"No scores yet!"})]})};var P=function(e){var t=e.category,r=e.score,c=e.setError,a=e.resetGame,s=Object(n.useState)(""),i=Object(O.a)(s,2),o=i[0],l=i[1],d=function(){var e=Object(j.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),o&&t&&r){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,A({category:t,name:o.trim(),score:r});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0),c("\ud83d\ude41 Error saving player score.");case 12:a();case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(m.jsxs)("form",{className:"score-form",onSubmit:d,children:[r?Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)("h3",{children:"You got a score! \ud83d\ude4c"}),Object(m.jsx)("p",{children:"Enter your name below to save your score."}),Object(m.jsx)("input",{type:"text",value:o,placeholder:"Enter your name",onChange:function(e){return l(e.target.value)},required:!0}),Object(m.jsx)("button",{className:"btn",type:"submit",children:"Save"}),Object(m.jsx)("span",{children:"or"})]}):Object(m.jsx)("h3",{children:"You didn't get a score! \ud83d\ude25"}),Object(m.jsx)("button",{className:"btn",type:"button",onClick:function(){return a()},children:"Back to Leaderboard"})]})},z=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value};var D=function(){var e,t,r=Object(n.useState)(!1),c=Object(O.a)(r,2),a=c[0],s=c[1],o=Object(n.useState)(!1),f=Object(O.a)(o,2),y=f[0],w=f[1],N=Object(n.useState)(!1),S=Object(O.a)(N,2),q=S[0],E=S[1],C=Object(n.useState)({amount:"5"}),T=Object(O.a)(C,2),k=T[0],I=T[1],Q=Object(n.useState)(!1),A=Object(O.a)(Q,2),F=A[0],G=A[1],L=Object(n.useState)(0),D=Object(O.a)(L,2),R=D[0],V=D[1],H=Object(n.useState)([]),W=Object(O.a)(H,2),_=W[0],J=W[1],Y=Object(n.useState)([]),B=Object(O.a)(Y,2),K=B[0],X=B[1],Z=Object(n.useState)("General Knowledge"),U=Object(O.a)(Z,2),$=U[0],ee=U[1],te=Object(n.useState)(null),re=Object(O.a)(te,2),ne=re[0],ce=re[1],ae=Object(n.useState)(0),se=Object(O.a)(ae,2),ie=se[0],oe=se[1],ue=Object(n.useState)(0),le=Object(O.a)(ue,2),je=le[0],de=le[1],be=Object(n.useState)([]),Oe=Object(O.a)(be,2),fe=Oe[0],he=Oe[1],me=Object(n.useState)(0),pe=Object(O.a)(me,2),xe=pe[0],ve=pe[1],ge=Object(n.useState)(!1),ye=Object(O.a)(ge,2),we=ye[0],Ne=ye[1],Se=Object(n.useState)(!1),qe=Object(O.a)(Se,2),Ee=qe[0],Ce=qe[1],Te=function(){V(0),X([]),ee("General Knowledge"),ce(null),oe(0),de(0),he([]),ve(0),Ne(!1),Ce(!1)},ke=function(){var e=Object(j.a)(u.a.mark((function e(t){var r,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),Te(),k.category&&ee(_.find((function(e){return e.id===parseInt(k.category)})).name),E(!0),e.prev=4,e.next=7,h()({method:"GET",url:"https://opentdb.com/api.php",params:Object(b.a)({},k)});case 7:if(r=e.sent,(n=r.data).results.length){e.next=13;break}return s("\ud83d\ude41 No questions found with the selected options. please try again!"),E(!1),e.abrupt("return");case 13:X(n.results.map((function(e,t){var r=z(e.correct_answer),n=[].concat(Object(l.a)(e.incorrect_answers.map((function(e){return z(e)}))),[r]);return{id:"".concat(t,"-").concat(Date.now()),question:z(e.question),answer:r,options:n.sort((function(){return Math.random()-.5}))}}))),de(n.results.length),Ne(!0),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),s("\ud83d\ude41 Error loading questions from the API. Please try again later.");case 22:E(!1);case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),Ie=Object(n.useRef)();return Ie.current=function(){var e,t=0,r=Object(i.a)(fe);try{for(r.s();!(e=r.n()).done;){var n=e.value;null!==n&&n.isCorrectAnswer&&(t+=100)}}catch(c){r.e(c)}finally{r.f()}ve(t),ie<je&&(ce(K[ie]),oe(ie+1)),ie===je&&Ce(!0)},Object(n.useEffect)((function(){var e;return w(!0),h()({method:"GET",url:"https://opentdb.com/api_category.php",cancelToken:new h.a.CancelToken((function(t){return e=t}))}).then((function(e){var t=e.data.trivia_categories.sort((function(e,t){return e.name>t.name}));J(t),w(!1)})).catch((function(e){h.a.isCancel(e)||(console.log(e),w(!1),s("\ud83d\ude41 Error loading categories from the API. Please try again later."))})),function(){return e()}}),[]),Object(n.useEffect)((function(){ce(K[0]),oe(1)}),[K]),Object(n.useEffect)((function(){if(fe.length){var e=setTimeout((function(){return Ie.current()}),1500);return function(){return clearTimeout(e)}}}),[fe]),Object(n.useEffect)((function(){var e=setTimeout((function(){return s(!1)}),5e3);return function(){return clearTimeout(e)}}),[a]),Object(m.jsxs)(n.Fragment,{children:[Object(m.jsx)(p,{categories:_,handleChange:function(e){I((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(d.a)({},e.target.id,e.target.value))}))},handleSubmit:ke,setWithTimer:G,loadingCategories:y,loadingQuestions:q,quizInProgress:we,defaultNumOfQuestions:k.amount}),Object(m.jsxs)("div",{className:"container",children:[a&&Object(m.jsx)("div",{className:"error-message",children:a}),!we&&!je&&Object(m.jsx)(M,{setError:s}),ne&&Object(m.jsxs)(n.Fragment,{children:[Object(m.jsxs)("div",{className:"flex-between",children:[Object(m.jsx)(x,{questionNum:ie,totalQuestions:je,percentage:(e=ie,t=je,0===e||0===t?0:Math.floor(100*e/t))}),Object(m.jsx)(v,{question:ne,score:xe,withTimer:F,timer:R})]}),Object(m.jsx)(g,{question:ne,handleAnswers:function(e){he((function(t){return[].concat(Object(l.a)(t),[e])})),ve("?")},lastQuestion:ie===je,gameEnded:Ee,setTimer:V,withTimer:F})]}),Ee&&Object(m.jsx)(P,{category:$,score:xe,setError:s,resetGame:Te})]})]})};s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(D,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.b3b0ba14.chunk.js.map