(this["webpackJsonpreact-quiz-app"]=this["webpackJsonpreact-quiz-app"]||[]).push([[0],{36:function(e,t){},44:function(e,t,n){},65:function(e,t){},66:function(e,t){},69:function(e,t){},77:function(e,t){},78:function(e,t){},79:function(e,t){},82:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(38),s=n.n(a),o=(n(44),n(39)),i=n(3),u=n.n(i),l=n(24),j=n(8),d=n(17),b=n(7),f=n(2),O=n(13),h=n.n(O),p=n(0);var m=function(e){var t=e.categories,n=e.handleSubmit,r=e.handleChange,c=e.loadingCategories,a=e.loadingQuestions,s=e.quizInProgress,o=e.defaultNumOfQuestions;return Object(p.jsx)("header",{children:Object(p.jsxs)("form",{onSubmit:n,children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"category",children:"Category"}),c?Object(p.jsx)("span",{children:"Loading categories..."}):Object(p.jsx)("select",{id:"category",onChange:r,disabled:c||s,children:t.map((function(e){return Object(p.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"difficulty",children:"Difficulty"}),Object(p.jsxs)("select",{id:"difficulty",defaultValue:"any",onChange:r,disabled:c||s,children:[Object(p.jsx)("option",{value:"any",children:"Any Difficulty"}),Object(p.jsx)("option",{value:"easy",children:"Easy"}),Object(p.jsx)("option",{value:"medium",children:"Medium"}),Object(p.jsx)("option",{value:"hard",children:"Hard"})]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"type",children:"Type"}),Object(p.jsxs)("select",{id:"type",defaultValue:"any",onChange:r,disabled:c||s,children:[Object(p.jsx)("option",{value:"any",children:"Any Type"}),Object(p.jsx)("option",{value:"multiple",children:"Multiple Choice"}),Object(p.jsx)("option",{value:"boolean",children:"True / False"})]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{htmlFor:"amount",children:"Questions"}),Object(p.jsx)("input",{type:"number",id:"amount",min:"5",max:"50",step:"5",defaultValue:o,onChange:r,disabled:c||s})]}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("button",{className:"btn",type:"submit",disabled:c||s,children:a?"Loading...":s?"Quiz in progress":"Generate New Quiz"})})]})})};var x=function(e){var t=e.questionNum,n=e.totalQuestions,r=e.percentage;return Object(p.jsxs)("div",{className:"progress-conatiner",children:[Object(p.jsxs)("div",{className:"progress-text",children:["Question ",t," of ",n]}),Object(p.jsx)("div",{className:"progress-bar-box",children:Object(p.jsx)("div",{className:"progress-bar",style:{width:"".concat(r,"%")}})})]})};var v=function(e){var t=e.score;return Object(p.jsxs)("div",{className:"score-container",children:[Object(p.jsx)("div",{className:"score-text",children:"Score"}),Object(p.jsx)("div",{className:"score-number",children:t})]})};var g=function(e){var t=e.question,n=e.handleAnswers,c=e.lastQuestion,a=e.gameEnded,s=Object(r.useState)(!1),o=Object(f.a)(s,2),i=o[0],u=o[1],l=Object(r.useState)(""),j=Object(f.a)(l,2),d=j[0],b=j[1];return Object(r.useEffect)((function(){b(""),u(!1)}),[t]),Object(p.jsxs)("article",{className:"question",children:[Object(p.jsx)("h2",{children:t.question}),Object(p.jsx)("ul",{children:t.options.map((function(e,r){return i?Object(p.jsx)("li",{className:"answered\n\t\t\t\t\t\t\t\t".concat(e===d?d===t.answer?"isRight":"isWrong":d!==t.answer&&e===t.answer?"isRight":""," \n\t\t\t\t\t\t\t"),children:e},e):Object(p.jsx)("li",{onClick:function(){return function(e){b(e),u(!0),n({id:t.id,isCorrectAnswer:t.answer===e})}(e)},children:e},e)}))}),i&&!c&&Object(p.jsxs)("p",{children:["Getting next question... ",Object(p.jsx)("span",{className:"loader",children:"\u23f3"})]}),i&&c&&Object(p.jsx)("p",{children:"Quiz has ended! \ud83c\udfc1"}),i&&c&&!a&&Object(p.jsxs)("p",{children:["Computing final score... ",Object(p.jsx)("span",{className:"loader",children:"\u23f3"})]})]})},y=n(6),w=new y.Client({secret:"fnAEOCHDjSACRF5LsqMFIWJItn4ACmZGEHXYGQdp"}),N=y.query.Collection,q=y.query.Create,S=y.query.Index,C=y.query.Map,E=y.query.Get,k=y.query.Lambda,Q=y.query.Match,T=y.query.Paginate,A=y.query.Var,G=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.query(q(N("playerScores"),{data:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(j.a)(u.a.mark((function e(){var t,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.query(C(T(Q(S("allPlayerScores"))),k("ref",E(A("ref")))));case 2:return t=e.sent,n=t.data,e.abrupt("return",n.map((function(e){return Object(b.a)(Object(b.a)({},e.data),{},{id:e.ref.id})})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){var t=e.reduce((function(e,t){var n=t.name.toLowerCase();return e[n]=n in e?Object(b.a)(Object(b.a)({},e[n]),{},{score:e[n].score+t.score}):t,e}),{});return Object.values(t).sort((function(e,t){return e.score<t.score}))},M=function(e){var t=e.reduce((function(e,t){var n=t.category;return n in e?e[n].push(t):e[n]=[t],e}),{}),n=[];for(var r in t){var c=I(t[r]);n.push({category:r,scores:c})}return n};var L=function(e){var t=e.setError,n=Object(r.useState)(null),c=Object(f.a)(n,2),a=c[0],s=c[1];return Object(r.useEffect)((function(){Object(j.a)(u.a.mark((function e(){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F();case 3:if((n=e.sent).length){e.next=6;break}return e.abrupt("return");case 6:s(M(n)),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),t("\ud83d\ude41 Error loading leaderboard.");case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[t]),Object(p.jsxs)("div",{className:"leaderboard",children:[Object(p.jsx)("h1",{children:"Leaderboard \ud83c\udfc6"}),a?a.map((function(e){var t=e.category,n=e.scores;return Object(p.jsxs)("div",{className:"leaderboard-group",children:[Object(p.jsx)("h3",{children:t}),Object(p.jsx)("ul",{children:n.map((function(e,t){return Object(p.jsxs)("li",{children:[0===t&&"\ud83e\udd47 ",1===t&&"\ud83e\udd48 ",2===t&&"\ud83e\udd49 ",e.name," - ",e.score]},e.id)}))})]},t)})):Object(p.jsx)("h3",{children:"No scores yet!"})]})};var P=function(e){var t=e.category,n=e.score,c=e.setError,a=e.resetGame,s=Object(r.useState)(""),o=Object(f.a)(s,2),i=o[0],l=o[1],d=function(){var e=Object(j.a)(u.a.mark((function e(r){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),i&&t&&n){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,G({category:t,name:i.trim(),score:n});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0),c("\ud83d\ude41 Error saving player score.");case 12:a();case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("form",{className:"score-form",onSubmit:d,children:[n?Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)("h3",{children:"You got a score! \ud83d\ude4c"}),Object(p.jsx)("p",{children:"Enter your name below to save your score."}),Object(p.jsx)("input",{type:"text",value:i,placeholder:"Enter your name",onChange:function(e){return l(e.target.value)},required:!0}),Object(p.jsx)("button",{className:"btn",type:"submit",children:"Save"}),Object(p.jsx)("span",{children:"or"})]}):Object(p.jsx)("h3",{children:"You didn't get a score! \ud83d\ude25"}),Object(p.jsx)("button",{className:"btn",type:"button",onClick:function(){return a()},children:"Back to Leaderboard"})]})},z=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value};var D=function(){var e,t,n=Object(r.useState)(!1),c=Object(f.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!1),O=Object(f.a)(i,2),y=O[0],w=O[1],N=Object(r.useState)(!1),q=Object(f.a)(N,2),S=q[0],C=q[1],E=Object(r.useState)({amount:"10"}),k=Object(f.a)(E,2),Q=k[0],T=k[1],A=Object(r.useState)([]),G=Object(f.a)(A,2),F=G[0],I=G[1],M=Object(r.useState)([]),D=Object(f.a)(M,2),H=D[0],R=D[1],V=Object(r.useState)("General Knowledge"),_=Object(f.a)(V,2),J=_[0],Y=_[1],B=Object(r.useState)(null),K=Object(f.a)(B,2),W=K[0],X=K[1],Z=Object(r.useState)(0),U=Object(f.a)(Z,2),$=U[0],ee=U[1],te=Object(r.useState)(0),ne=Object(f.a)(te,2),re=ne[0],ce=ne[1],ae=Object(r.useState)([]),se=Object(f.a)(ae,2),oe=se[0],ie=se[1],ue=Object(r.useState)(0),le=Object(f.a)(ue,2),je=le[0],de=le[1],be=Object(r.useState)(!1),fe=Object(f.a)(be,2),Oe=fe[0],he=fe[1],pe=Object(r.useState)(!1),me=Object(f.a)(pe,2),xe=me[0],ve=me[1],ge=function(){R([]),Y("General Knowledge"),X(null),ee(0),ce(0),ie([]),de(0),he(!1),ve(!1)},ye=function(){var e=Object(j.a)(u.a.mark((function e(t){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),ge(),Q.category&&Y(F.find((function(e){return e.id===parseInt(Q.category)})).name),C(!0),e.prev=4,e.next=7,h()({method:"GET",url:"https://opentdb.com/api.php",params:Object(b.a)({},Q)});case 7:if(n=e.sent,(r=n.data).results.length){e.next=13;break}return s("\ud83d\ude41 No questions found with the selected options. please try again!"),C(!1),e.abrupt("return");case 13:R(r.results.map((function(e,t){var n=z(e.correct_answer),r=[].concat(Object(l.a)(e.incorrect_answers.map((function(e){return z(e)}))),[n]);return{id:"".concat(t,"-").concat(Date.now()),question:z(e.question),answer:n,options:r.sort((function(){return Math.random()-.5}))}}))),ce(r.results.length),he(!0),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),console.log(e.t0),s("\ud83d\ude41 Error loading questions from the API. Please try again later.");case 22:C(!1);case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),we=Object(r.useRef)();return we.current=function(){var e,t=0,n=Object(o.a)(oe);try{for(n.s();!(e=n.n()).done;){e.value.isCorrectAnswer&&(t+=100)}}catch(r){n.e(r)}finally{n.f()}de(t),$<re?(X(H[$]),ee($+1)):he(!1),$===re&&ve(!0)},Object(r.useEffect)((function(){var e;return w(!0),h()({method:"GET",url:"https://opentdb.com/api_category.php",cancelToken:new h.a.CancelToken((function(t){return e=t}))}).then((function(e){var t=e.data;I(t.trivia_categories),w(!1)})).catch((function(e){h.a.isCancel(e)||(console.log(e),w(!1),s("\ud83d\ude41 Error loading categories from the API. Please try again later."))})),function(){return e()}}),[]),Object(r.useEffect)((function(){X(H[0]),ee(1)}),[H]),Object(r.useEffect)((function(){if(oe.length){var e=setTimeout((function(){return we.current()}),3e3);return function(){return clearTimeout(e)}}}),[oe]),Object(r.useEffect)((function(){var e=setTimeout((function(){return s(!1)}),5e3);return function(){return clearTimeout(e)}}),[a]),Object(p.jsxs)(r.Fragment,{children:[Object(p.jsx)(m,{categories:F,handleChange:function(e){T((function(t){return Object(b.a)(Object(b.a)({},t),{},Object(d.a)({},e.target.id,e.target.value))}))},handleSubmit:ye,loadingCategories:y,loadingQuestions:S,quizInProgress:Oe,defaultNumOfQuestions:Q.amount}),Object(p.jsxs)("div",{className:"container",children:[a&&Object(p.jsx)("div",{className:"error-message",children:a}),!Oe&&!re&&Object(p.jsx)(L,{setError:s}),W&&Object(p.jsxs)(r.Fragment,{children:[Object(p.jsxs)("div",{className:"flex-between",children:[Object(p.jsx)(x,{questionNum:$,totalQuestions:re,percentage:(e=$,t=re,0===e||0===t?0:Math.floor(100*e/t))}),Object(p.jsx)(v,{score:je})]}),Object(p.jsx)(g,{question:W,handleAnswers:function(e){ie((function(t){return[].concat(Object(l.a)(t),[e])})),de("?")},lastQuestion:$===re,gameEnded:xe})]}),xe&&Object(p.jsx)(P,{category:J,score:je,setError:s,resetGame:ge})]})]})};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(D,{})}),document.getElementById("root"))}},[[82,1,2]]]);
//# sourceMappingURL=main.0c843961.chunk.js.map